<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installing pyLIMA under MacOS &mdash; pyLIMA 0.0.0 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="pyLIMA 0.0.0 documentation" href="index.html" />
    <link rel="up" title="Installation and troubleshooting" href="Installation.html" />
    <link rel="next" title="Recompile the VBBinaryLensing library" href="RecompileVBBinaryLensing.html" />
    <link rel="prev" title="Troubleshooting" href="Troubleshooting.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="installing-pylima-under-macos">
<h1>Installing pyLIMA under MacOS<a class="headerlink" href="#installing-pylima-under-macos" title="Permalink to this headline">Â¶</a></h1>
<p><em>First, throw your MAC and buy a LINUX computer</em></p>
<p>pyLIMA can run very well under MacOS, but there are some subtle differences
relative to the (default) Linux version, as there are some significant differences both
the format of compiled libraries and the framework under which python codes
runs, so a slightly different install process is needed.</p>
<p>1) Python on MacOS
Python codes like pyLIMA can run under the MacOS python Framework, provided the
the correct versions of various packages (e.g. numpy, scipy, etc) that it requires
are available.</p>
<p>However, the default versions of these packages on MacOS can be older and may not
have all the functions pyLIMA uses.  These can be updated by the user, but bearing
in mind that python is widely used in other applications, it is advisible NOT to
make changes in the system&#8217;s python Framework.</p>
<p>Therefore, our recommendation is to use a virtualenv, which creates a distinct
&#8216;bubble&#8217; python environment within which code can be run and packages installed
without tampering with the system python.  More background on virtualenv can be
found <a class="reference external" href="http://sourabhbajaj.com/mac-setup/Python/virtualenv.html">here</a></p>
<p>To build the required virtualenv for pyLIMA, follow these steps:</p>
<p><strong>&gt; sudo pip install virtualenv</strong></p>
<p><strong>&gt; cd $DIR</strong></p>
<p><strong>&gt; virtualenv venv &#8211;distribute &#8211;system-site-packages</strong></p>
<p><strong>&gt; source $DIR/venv/bin/activate</strong></p>
<p>where $DIR is a user-owned directory where you wish to install software.
The &#8216;activate&#8217; command allows you to enter the virtualenv &#8216;bubble&#8217;, and is indicated
by the commandline prompt changing to (venv)&gt;  Packages installed while this is
active will be installed under $DIR/venv/ rather than the system python, and
similarly any python code run will run under the new python install.</p>
<p>The commandline above initializes the virtualenv with a copy of all packages which
the system python has, since in most cases pyLIMA will use the same versions of
these packages.  Under MacOS Sierra v10.12.3 only the following should need
installing or updating:</p>
<p><strong>(venv)&gt; pip install emcee</strong></p>
<p><strong>(venv)&gt; pip install astropy</strong></p>
<p><strong>(venv)&gt; pip install pyslalib</strong></p>
<p><strong>(venv)&gt; pip install matplotlib==2.0.0</strong></p>
<p><strong>(venv)&gt; pip install scipy==0.18.1</strong></p>
<p>When you wish to exit the virtualenv, type</p>
<p><strong>(venv)&gt; deactivate</strong></p>
<p>2) Ensure SWIG and PRCE are installed.  These packages are used to wrap the C++
code of VBBinaryLensing and enable it to be called from pyLIMA&#8217;s python
code. These packages can be downloaded from here:</p>
<p><a class="reference external" href="https://sourceforge.net/projects/pcre/?source=typ_redirect">pcre</a></p>
<p><a class="reference external" href="https://sourceforge.net/projects/swig/?source=typ_redirect">SWIG</a></p>
<p>Both can be built with a &#8221;./configure; make; make install&#8221; sequence, but note
PRCE needs to be installed first and both should be installed using sudo as they
place files in the systems directories.</p>
<p>3) Link to the appropriate version of VBBinaryLensing
pyLIMA calls on a pre-built library of the VBBinaryLensing functions, which can
be found at</p>
<p><strong>$DIR/pyLIMA/pyLIMA/subroutines/VBBinaryLensingLibrary/_VBBinaryLensingLibrary.so</strong></p>
<p>By default, this file refers to a library built in Linux format, but an
additional file, _VBBinaryLensingLibrary.so.osx is also included, compiled under
MacOS Sierra v10.12.3.  To apply the MacOS library:</p>
<p><strong>&gt; cd $DIR/pyLIMA/pyLIMA/subroutines/VBBinaryLensingLibrary</strong></p>
<p><strong>&gt; mv _VBBinaryLensingLibrary.so _VBBinaryLensingLibrary.so.lnx</strong></p>
<p><strong>&gt; ln -s _VBBinaryLensingLibrary.so.osx _VBBinaryLensingLibrary.so</strong></p>
<ol class="arabic simple" start="4">
<li><strong>[OPTIONAL]</strong> If you need to re-compile VBBinaryLensing, here is the procedure:</li>
</ol>
<p><strong>&gt; cd $DIR/pyLIMA/pyLIMA/subroutines/VBBinaryLensingLibrary</strong></p>
<p>Edit the file VBBinaryLensingLibrary.cpp and remove the line:</p>
<p><strong>#include &#8220;stdafx.h&#8221;</strong></p>
<p><strong>&gt; swig -c++ -python VBBinaryLensingLibrary.i</strong></p>
<p><strong>&gt; g++ -O3 -fPIC -lm -c -m64 VBBinaryLensingLibrary.cpp</strong></p>
<p><strong>&gt; g++ -O3 -fPIC -lm -c -m64 VBBinaryLensingLibrary_wrap.cxx -I &lt;path to python include directory&gt;</strong></p>
<p>The python path depends on your local install, e.g.</p>
<p><strong>$DIR/venv/include/python2.7</strong></p>
<p><strong>&gt; g++ -lpython -shared VBBinaryLensingLibrary.o VBBinaryLensingLibrary_wrap.o -o _VBBinaryLensingLibrary.so.osx</strong></p>
<p>5) Ensure python matplotlib links to the correct backend to render images
- In your /Users/&lt;UID&gt;/ home directory, create or edit the file
~/.matplotlib/matplotlibrc with the contents &#8220;backend: TkAgg&#8221;</p>
<p>And you should be ready run pyLIMA on your Mac!</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="Installation.html">Installation and troubleshooting</a><ul>
      <li>Previous: <a href="Troubleshooting.html" title="previous chapter">Troubleshooting</a></li>
      <li>Next: <a href="RecompileVBBinaryLensing.html" title="next chapter">Recompile the VBBinaryLensing library</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/InstallationForMACUser.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Etienne Bachelet.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.7</a>
      
      |
      <a href="_sources/InstallationForMACUser.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>